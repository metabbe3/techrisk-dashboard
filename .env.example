# =============================================================================
# TECHRISK DASHBOARD - PRODUCTION ENVIRONMENT CONFIGURATION
# Domain: https://techrisk.paas.dana.id
# =============================================================================

APP_NAME=TechriskDashboard
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://techrisk.paas.dana.id
ASSET_URL=https://techrisk.paas.dana.id

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_CONNECTION=mysql
DB_HOST=db                # CHANGED: Was 127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel       # CONFIRM: Match your docker-compose MYSQL_DATABASE
DB_USERNAME=root          # CONFIRM: Match your docker-compose MYSQL_USER
DB_PASSWORD=password      # CONFIRM: Match your docker-compose MYSQL_PASSWORD

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_DRIVER=redis      # RECOMMENDED: Use Redis since you have it
SESSION_LIFETIME=10080
SESSION_ENCRYPT=false     # SAFER: Set false until keys are stable
SESSION_PATH=/
SESSION_DOMAIN=.paas.dana.id  # PRODUCTION: Set to your domain for cross-subdomain cookies
SESSION_SECURE_COOKIE=true    # PRODUCTION: Must be true for HTTPS

# =============================================================================
# BROADCASTING & REAL-TIME NOTIFICATIONS
# =============================================================================
BROADCAST_CONNECTION=reverb

# --- LARAVEL REVERB (WebSocket Broadcasting) ---
# For production with HTTPS domain, Reverb should use:
# - REVERB_HOST: Your production domain or internal host
# - REVERB_SCHEME: https (for wss:// secure WebSocket)
# - REVERB_PORT: 443 (standard HTTPS/WSS port) or custom port
# - VITE_REVERB_*: Same values for frontend connection

# Local Development (default):
# REVERB_APP_ID=local
# REVERB_APP_KEY=local-key
# REVERB_APP_SECRET=local-secret
# REVERB_HOST=127.0.0.1
# REVERB_PORT=8081
# REVERB_SCHEME=http
# VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
# VITE_REVERB_HOST="${REVERB_HOST}"
# VITE_REVERB_PORT="${REVERB_PORT}"
# REVERB_ALLOWED_ORIGINS="*"

# Production Setup:
# Generate secure keys with: php artisan key:generate --show
REVERB_APP_ID=production
REVERB_APP_KEY=
REVERB_APP_SECRET=
REVERB_HOST=techrisk.paas.dana.id
REVERB_PORT=443
REVERB_SCHEME=https
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT="${REVERB_PORT}"
# Security: Restrict WebSocket connections to your domain only
REVERB_ALLOWED_ORIGINS="https://techrisk.paas.dana.id"

# =============================================================================
# QUEUE & CACHE CONFIGURATION
# =============================================================================
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis

CACHE_STORE=redis
# CACHE_PREFIX=

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# =============================================================================
# MAIL CONFIGURATION
# =============================================================================
# PRODUCTION: Configure your SMTP server for sending emails
# For development/testing, use 'log' to prevent timeouts

MAIL_MAILER=smtp          # CHANGED: Set to smtp for production
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1       # UPDATE: Set your SMTP host
MAIL_PORT=2525            # UPDATE: Set your SMTP port (usually 587 for TLS, 465 for SSL)
MAIL_USERNAME=null        # UPDATE: Set your SMTP username
MAIL_PASSWORD=null        # UPDATE: Set your SMTP password
MAIL_ENCRYPTION=null      # UPDATE: Set to 'tls' or 'ssl' for production
MAIL_FROM_ADDRESS="noreply@dana.id"
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# AWS S3 CONFIGURATION (Optional - for file storage)
# =============================================================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# VITE / FRONTEND CONFIGURATION
# =============================================================================
VITE_APP_NAME="${APP_NAME}"
